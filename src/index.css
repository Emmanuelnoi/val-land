@import url('https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Lexend:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply box-border;
  }

  body {
    @apply bg-cream-50 text-ink-500 font-sans antialiased;
    text-rendering: optimizeLegibility;
    font-feature-settings: "ss01" 1, "cv02" 1;
    -webkit-tap-highlight-color: var(--accent-soft-muted);
  }

  h1, h2, h3, h4 {
    @apply font-display text-ink-500;
    letter-spacing: -0.01em;
  }

  ::selection {
    background: var(--accent-border-strong);
  }

  :root {
    --accent-1: #f05d88;
    --accent-2: #ff90b3;
    --accent-3: #d94873;
    --accent-text: #d94873;
    --accent-text-strong: #b43a5e;
    --accent-muted: #ff90b3;
    --accent-soft: #fff0f5;
    --accent-soft-strong: #ffdbe7;
    --accent-soft-muted: rgba(255, 240, 245, 0.6);
    --accent-soft-faint: rgba(255, 240, 245, 0.5);
    --accent-border: #ffdbe7;
    --accent-border-strong: #ffb9cf;
    --accent-border-muted: rgba(255, 219, 231, 0.8);
    --accent-icon: #f05d88;
    --focus-ring: #ffb9cf;
    --chip-bg: rgba(255, 255, 255, 0.8);
    --chip-border: rgba(255, 200, 215, 0.6);
    --chip-text: #d94873;
    --card-border-1: rgba(255, 180, 205, 0.6);
    --card-border-2: rgba(255, 235, 215, 0.6);
    --bg-romance-r1: rgba(255, 208, 225, 0.35);
    --bg-romance-r2: rgba(255, 228, 210, 0.25);
    --bg-romance-g1: rgba(255, 250, 246, 0.98);
    --bg-romance-g2: rgba(255, 238, 246, 0.94);
    --bg-romance-g3: rgba(255, 246, 236, 0.96);
    --bg-sparkles-r1: rgba(255, 200, 224, 0.3);
    --bg-sparkles-r2: rgba(255, 230, 210, 0.26);
    --bg-sparkles-g1: rgba(255, 251, 248, 0.98);
    --bg-sparkles-g2: rgba(255, 240, 248, 0.95);
    --bg-sparkles-g3: rgba(255, 248, 238, 0.98);
  }

  [data-theme="birthday-neutral"] {
    --accent-1: #ff8a5b;
    --accent-2: #ffd166;
    --accent-3: #ff6b6b;
    --accent-text: #e0663a;
    --accent-text-strong: #b84a2b;
    --accent-muted: #ffab7a;
    --accent-soft: #fff3e8;
    --accent-soft-strong: #ffe0cf;
    --accent-soft-muted: rgba(255, 243, 232, 0.6);
    --accent-soft-faint: rgba(255, 243, 232, 0.5);
    --accent-border: #ffd1bd;
    --accent-border-strong: #ffc1a6;
    --accent-border-muted: rgba(255, 209, 189, 0.8);
    --accent-icon: #ff8a5b;
    --focus-ring: #ffd166;
    --chip-bg: rgba(255, 255, 255, 0.84);
    --chip-border: rgba(255, 215, 190, 0.65);
    --chip-text: #e0663a;
    --card-border-1: rgba(255, 190, 160, 0.55);
    --card-border-2: rgba(255, 228, 190, 0.55);
    --bg-romance-r1: rgba(255, 214, 176, 0.35);
    --bg-romance-r2: rgba(255, 235, 200, 0.3);
    --bg-romance-g1: rgba(255, 252, 248, 0.98);
    --bg-romance-g2: rgba(255, 239, 230, 0.95);
    --bg-romance-g3: rgba(255, 246, 238, 0.98);
    --bg-sparkles-r1: rgba(255, 215, 190, 0.3);
    --bg-sparkles-r2: rgba(255, 236, 205, 0.26);
    --bg-sparkles-g1: rgba(255, 252, 248, 0.98);
    --bg-sparkles-g2: rgba(255, 242, 232, 0.96);
    --bg-sparkles-g3: rgba(255, 247, 238, 0.98);
  }

  [data-theme="birthday-men"] {
    --accent-1: #1f3b5f;
    --accent-2: #2f5aa6;
    --accent-3: #f2b03f;
    --accent-text: #2f5aa6;
    --accent-text-strong: #1f3b5f;
    --accent-muted: #6d8dc4;
    --accent-soft: #eef3fb;
    --accent-soft-strong: #dbe7f9;
    --accent-soft-muted: rgba(238, 243, 251, 0.6);
    --accent-soft-faint: rgba(238, 243, 251, 0.5);
    --accent-border: #cfdcf2;
    --accent-border-strong: #b8c9ec;
    --accent-border-muted: rgba(207, 220, 242, 0.8);
    --accent-icon: #2f5aa6;
    --focus-ring: #f2b03f;
    --chip-bg: rgba(255, 255, 255, 0.86);
    --chip-border: rgba(205, 220, 245, 0.65);
    --chip-text: #2f5aa6;
    --card-border-1: rgba(187, 204, 234, 0.55);
    --card-border-2: rgba(240, 220, 175, 0.45);
    --bg-romance-r1: rgba(203, 220, 245, 0.35);
    --bg-romance-r2: rgba(225, 236, 250, 0.3);
    --bg-romance-g1: rgba(250, 252, 255, 0.98);
    --bg-romance-g2: rgba(236, 244, 252, 0.95);
    --bg-romance-g3: rgba(245, 249, 255, 0.98);
    --bg-sparkles-r1: rgba(210, 226, 248, 0.3);
    --bg-sparkles-r2: rgba(232, 238, 250, 0.26);
    --bg-sparkles-g1: rgba(250, 252, 255, 0.98);
    --bg-sparkles-g2: rgba(238, 244, 252, 0.96);
    --bg-sparkles-g3: rgba(245, 249, 255, 0.98);
  }

  [data-theme="birthday-women"] {
    --accent-1: #f26a8d;
    --accent-2: #ffd1dc;
    --accent-3: #c85a84;
    --accent-text: #c85a84;
    --accent-text-strong: #a5476b;
    --accent-muted: #f3a4b8;
    --accent-soft: #fff1f4;
    --accent-soft-strong: #ffe0e8;
    --accent-soft-muted: rgba(255, 241, 244, 0.6);
    --accent-soft-faint: rgba(255, 241, 244, 0.5);
    --accent-border: #ffd1dc;
    --accent-border-strong: #f8bfd0;
    --accent-border-muted: rgba(255, 209, 220, 0.8);
    --accent-icon: #f26a8d;
    --focus-ring: #ffd1dc;
    --chip-bg: rgba(255, 255, 255, 0.86);
    --chip-border: rgba(255, 209, 220, 0.65);
    --chip-text: #c85a84;
    --card-border-1: rgba(248, 191, 208, 0.55);
    --card-border-2: rgba(255, 228, 235, 0.6);
    --bg-romance-r1: rgba(255, 214, 224, 0.35);
    --bg-romance-r2: rgba(255, 235, 242, 0.3);
    --bg-romance-g1: rgba(255, 251, 252, 0.98);
    --bg-romance-g2: rgba(255, 239, 245, 0.95);
    --bg-romance-g3: rgba(255, 246, 250, 0.98);
    --bg-sparkles-r1: rgba(255, 216, 228, 0.3);
    --bg-sparkles-r2: rgba(255, 234, 243, 0.26);
    --bg-sparkles-g1: rgba(255, 251, 252, 0.98);
    --bg-sparkles-g2: rgba(255, 242, 247, 0.96);
    --bg-sparkles-g3: rgba(255, 247, 251, 0.98);
  }

  [data-theme="sage-mist"] {
    --accent-1: #6c8f7d;
    --accent-2: #a8c9a3;
    --accent-3: #4e6b60;
    --accent-text: #4e6b60;
    --accent-text-strong: #3b544b;
    --accent-muted: #8fb4a2;
    --accent-soft: #f1f7f3;
    --accent-soft-strong: #e3efe7;
    --accent-soft-muted: rgba(241, 247, 243, 0.6);
    --accent-soft-faint: rgba(241, 247, 243, 0.5);
    --accent-border: #d5e6db;
    --accent-border-strong: #c4dbc9;
    --accent-border-muted: rgba(213, 230, 219, 0.8);
    --accent-icon: #6c8f7d;
    --focus-ring: #a8c9a3;
    --chip-bg: rgba(255, 255, 255, 0.86);
    --chip-border: rgba(200, 220, 210, 0.6);
    --chip-text: #4e6b60;
    --card-border-1: rgba(175, 205, 190, 0.55);
    --card-border-2: rgba(230, 240, 235, 0.6);
    --bg-romance-r1: rgba(205, 228, 215, 0.35);
    --bg-romance-r2: rgba(225, 238, 230, 0.3);
    --bg-romance-g1: rgba(249, 252, 250, 0.98);
    --bg-romance-g2: rgba(236, 245, 240, 0.95);
    --bg-romance-g3: rgba(244, 250, 247, 0.98);
    --bg-sparkles-r1: rgba(210, 230, 220, 0.3);
    --bg-sparkles-r2: rgba(230, 242, 235, 0.26);
    --bg-sparkles-g1: rgba(250, 253, 251, 0.98);
    --bg-sparkles-g2: rgba(238, 246, 241, 0.96);
    --bg-sparkles-g3: rgba(245, 251, 248, 0.98);
  }

  [data-theme="sage-olive"] {
    --accent-1: #6f7a4f;
    --accent-2: #c1c69f;
    --accent-3: #47543a;
    --accent-text: #5b6342;
    --accent-text-strong: #3f4b33;
    --accent-muted: #98a07b;
    --accent-soft: #f4f6ee;
    --accent-soft-strong: #e4e9d6;
    --accent-soft-muted: rgba(244, 246, 238, 0.6);
    --accent-soft-faint: rgba(244, 246, 238, 0.5);
    --accent-border: #d5dbc2;
    --accent-border-strong: #c5cfad;
    --accent-border-muted: rgba(213, 219, 194, 0.8);
    --accent-icon: #6f7a4f;
    --focus-ring: #c1c69f;
    --chip-bg: rgba(255, 255, 255, 0.86);
    --chip-border: rgba(210, 218, 196, 0.6);
    --chip-text: #5b6342;
    --card-border-1: rgba(196, 206, 170, 0.55);
    --card-border-2: rgba(236, 240, 224, 0.6);
    --bg-romance-r1: rgba(220, 228, 200, 0.35);
    --bg-romance-r2: rgba(235, 241, 220, 0.3);
    --bg-romance-g1: rgba(250, 252, 248, 0.98);
    --bg-romance-g2: rgba(241, 245, 236, 0.95);
    --bg-romance-g3: rgba(247, 250, 244, 0.98);
    --bg-sparkles-r1: rgba(222, 230, 205, 0.3);
    --bg-sparkles-r2: rgba(236, 242, 223, 0.26);
    --bg-sparkles-g1: rgba(250, 252, 248, 0.98);
    --bg-sparkles-g2: rgba(242, 246, 238, 0.96);
    --bg-sparkles-g3: rgba(247, 250, 244, 0.98);
  }

  [data-theme="sage-stone"] {
    --accent-1: #5d7568;
    --accent-2: #cfdad5;
    --accent-3: #3f5148;
    --accent-text: #4a5c53;
    --accent-text-strong: #38463f;
    --accent-muted: #9aaea4;
    --accent-soft: #f2f6f4;
    --accent-soft-strong: #e1e9e6;
    --accent-soft-muted: rgba(242, 246, 244, 0.6);
    --accent-soft-faint: rgba(242, 246, 244, 0.5);
    --accent-border: #d3ddd8;
    --accent-border-strong: #c2d0ca;
    --accent-border-muted: rgba(211, 221, 216, 0.8);
    --accent-icon: #5d7568;
    --focus-ring: #cfdad5;
    --chip-bg: rgba(255, 255, 255, 0.86);
    --chip-border: rgba(210, 221, 216, 0.6);
    --chip-text: #4a5c53;
    --card-border-1: rgba(195, 210, 203, 0.55);
    --card-border-2: rgba(232, 239, 236, 0.6);
    --bg-romance-r1: rgba(214, 227, 221, 0.35);
    --bg-romance-r2: rgba(230, 239, 235, 0.3);
    --bg-romance-g1: rgba(250, 252, 251, 0.98);
    --bg-romance-g2: rgba(238, 244, 242, 0.95);
    --bg-romance-g3: rgba(245, 250, 248, 0.98);
    --bg-sparkles-r1: rgba(217, 229, 224, 0.3);
    --bg-sparkles-r2: rgba(233, 241, 237, 0.26);
    --bg-sparkles-g1: rgba(250, 252, 251, 0.98);
    --bg-sparkles-g2: rgba(240, 245, 243, 0.96);
    --bg-sparkles-g3: rgba(246, 250, 249, 0.98);
  }
}

@layer components {
  .app-surface {
    @apply bg-white/80 backdrop-blur-xl border border-white/60 shadow-soft rounded-3xl;
  }

  .valentine-panel {
    @apply app-surface relative overflow-hidden;
  }

  .valentine-panel::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(140deg, rgba(255, 255, 255, 0.9), rgba(255, 248, 244, 0.6));
    opacity: 0.55;
    pointer-events: none;
  }

  .valentine-panel > * {
    position: relative;
    z-index: 1;
  }

  .focus-ring {
    @apply focus-visible:outline-none;
  }

  .focus-ring:focus-visible {
    outline: 2px solid var(--focus-ring);
    outline-offset: 2px;
  }

  .valentine-card {
    position: relative;
    overflow: hidden;
    border-radius: 1.5rem;
    background: rgba(255, 255, 255, 0.88);
    box-shadow: 0 20px 40px -28px rgba(25, 10, 24, 0.5);
  }

  .valentine-card::before {
    content: "";
    position: absolute;
    inset: 0;
    padding: 1px;
    border-radius: 1.5rem;
    background: linear-gradient(135deg, var(--card-border-1), var(--card-border-2));
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask-composite: exclude;
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
    pointer-events: none;
  }

  .valentine-chip {
    @apply inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold uppercase tracking-[0.24em] shadow-soft;
    border: 1px solid var(--chip-border);
    background: var(--chip-bg);
    color: var(--chip-text);
  }

  .btn-primary {
    background: linear-gradient(120deg, var(--accent-1), var(--accent-2) 45%, var(--accent-3) 100%);
    background-size: 200% 200%;
    color: #fff;
    box-shadow: 0 18px 40px -26px rgba(20, 9, 24, 0.6);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 24px 48px -28px rgba(20, 9, 24, 0.7);
  }

  .btn-secondary {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid var(--accent-border);
    color: #3a2637;
  }

  .btn-secondary:hover {
    border-color: var(--accent-border-strong);
    transform: translateY(-2px);
  }

  .btn-ghost {
    background: transparent;
    color: #3a2637;
  }

  .btn-ghost:hover {
    background: rgba(255, 220, 235, 0.35);
  }

  .input-shell {
    @apply flex items-center gap-3 rounded-2xl border border-white/70 bg-white/80 px-4 py-3 shadow-soft;
  }

  .input-field {
    @apply w-full rounded-2xl border border-white/70 bg-white/80 px-4 py-3 text-base text-ink-500 shadow-soft placeholder:text-ink-300 focus-ring;
  }

  .input-shell:focus-within {
    border-color: var(--accent-border-strong);
    box-shadow: 0 16px 30px -26px rgba(20, 9, 24, 0.6);
  }

  .link-soft {
    @apply text-sm font-medium;
    color: var(--accent-text);
    touch-action: manipulation;
  }

  .link-soft:hover {
    color: var(--accent-text-strong);
  }

  .skip-link {
    position: absolute;
    left: 1.5rem;
    top: 1.5rem;
    transform: translateY(-200%);
    padding: 0.75rem 1.25rem;
    border-radius: 9999px;
    background: rgba(255, 255, 255, 0.9);
    color: #2a1c2b;
    font-weight: 600;
    z-index: 20;
    box-shadow: 0 12px 30px -20px rgba(20, 9, 24, 0.6);
    transition: transform 200ms ease;
  }

  .skip-link:focus-visible {
    transform: translateY(0);
  }

  .confetti-layer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 40;
  }

  .confetti-piece {
    position: absolute;
    top: -12%;
    left: var(--x, 50%);
    width: var(--size, 10px);
    height: calc(var(--size, 10px) * 0.55);
    background: var(--color, #f05d88);
    border-radius: 3px;
    opacity: 0;
    transform: translateY(-10%) rotate(var(--rot, 0deg));
    animation: confetti-fall var(--duration, 1500ms) ease-out var(--delay, 0ms) forwards;
  }
}

@layer utilities {
  .text-rose-gradient {
    background: linear-gradient(110deg, var(--accent-1) 0%, var(--accent-2) 45%, var(--accent-3) 100%);
    -webkit-background-clip: text;
    color: transparent;
  }

  .text-accent {
    color: var(--accent-text);
  }

  .text-accent-strong {
    color: var(--accent-text-strong);
  }

  .text-accent-muted {
    color: var(--accent-muted);
  }

  .bg-accent {
    background-color: var(--accent-1);
  }

  .bg-accent-soft {
    background-color: var(--accent-soft);
  }

  .bg-accent-soft-strong {
    background-color: var(--accent-soft-strong);
  }

  .bg-accent-soft-muted {
    background-color: var(--accent-soft-muted);
  }

  .bg-accent-soft-faint {
    background-color: var(--accent-soft-faint);
  }

  .border-accent {
    border-color: var(--accent-border);
  }

  .border-accent-strong {
    border-color: var(--accent-border-strong);
  }

  .border-accent-muted {
    border-color: var(--accent-border-muted);
  }

  .hover-accent-soft:hover {
    background-color: var(--accent-soft);
  }

  .hover-text-accent-strong:hover {
    color: var(--accent-text-strong);
  }

  .text-shadow-soft {
    text-shadow: 0 18px 36px rgba(25, 10, 24, 0.12);
  }

  .valentine-shell {
    position: relative;
    isolation: isolate;
    overflow: hidden;
  }

  .bg-romance {
    background-image:
      radial-gradient(640px 260px at 85% 10%, var(--bg-romance-r1), transparent 60%),
      radial-gradient(520px 240px at 10% 80%, var(--bg-romance-r2), transparent 60%),
      linear-gradient(140deg, var(--bg-romance-g1), var(--bg-romance-g2) 52%, var(--bg-romance-g3));
  }

  .bg-sparkles {
    background-image:
      radial-gradient(520px 240px at 70% 15%, var(--bg-sparkles-r1), transparent 60%),
      radial-gradient(520px 260px at 18% 78%, var(--bg-sparkles-r2), transparent 60%),
      linear-gradient(150deg, var(--bg-sparkles-g1), var(--bg-sparkles-g2) 42%, var(--bg-sparkles-g3));
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-wiggle,
    .animate-floatSlow,
    .animate-drift,
    .animate-shimmer {
      animation: none !important;
    }

    .btn-primary,
    .btn-secondary,
    .btn-ghost,
    .valentine-card,
    .input-shell,
    .link-soft,
    .skip-link,
    .confetti-piece {
      transition: none !important;
    }
  }

  @keyframes confetti-fall {
    0% {
      opacity: 0;
      transform: translateY(-10%) rotate(0deg);
    }
    10% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateY(110vh) rotate(240deg);
    }
  }
}
